<h2>Promise</h2>

<u-link-wrapper>
    <a href="https://learn.javascript.ru/promise-basics" target="_blank">Promise</a>
	<a href="https://www.youtube.com/watch?v=1idOY3C1gYU" target="_blank">YouTube</a>
</u-link-wrapper>

<ul class="list-point">
	<li><u-text-define>Promise</u-text-define> - специальный объект, который используются для обработки результатов асинхронных операций. Промис хранит своё состояние, текущий результат (если есть) и коллбэки</li>
</ul>

<v-two><template v-slot:first>
<!------------------------------------------------------------->
<h4>Состояния Promise</h4>
<!------------------------------------------------------------->
<ol class="list-num">
	<li><u>pending</u> - ожидание (выполняется)</li>
	<li><u>fulfilled</u> - выполнено успешно</li>
	<li><u>rejected</u> - отклонено (выполнено с ошибкой)</li>
</ol>
</template><template v-slot:last>
<!------------------------------------------------------------->
<h4>Навешиваемые коллбэки</h4>
<!------------------------------------------------------------->
<ul class="list-point">
	<li><u>onFulfilled</u> – срабатывают, когда promise в состоянии <u>fulfilled</u></li>
	<li><u>onRejected</u> – срабатывают, когда promise в состоянии <u>rejected</u></li>
</ul>
</template></v-two>

<v-code lang="js border" title="">
let promise = new Promise(function(resolve, reject) {
	resolve(arg) // => onFulfilled(arg) => .then(arg)  => Promise
	reject(arg)  // => onRejected(arg)  => .catch(arg) => Promise
});
</v-code>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>Объявление</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<!------------------------------------------------------------->
<h4>Promise</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="Объявление">
let promise = new <u-code>Promise</u-code>((resolve, reject) => {
    if (...) {
    	// onResolved()
        <u-code>resolve</u-code>('ok');
    } else {
    	// onRejected()
        <u-code>reject</u-code>(new Error('Api error')); // аналогично с throw
        throw new Error('Api error');   // аналогично с reject
    }
});
</v-code>

<v-code lang="js" title="Использование">
promise
    <u-code>.then</u-code>(result => {
        console.log(result);
    })
    <u-code>.catch</u-code>(error => {
        console.error(error);
        console.error(error.message); 
    })
</v-code>

<!------------------------------------------------------------->
<h4>Функция</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="Объявление">
function asyncFunc() {
	const promise = new Promise((resolve, reject) => {
		//
	});

	return promise;
}
</v-code>

<v-code lang="js" title="Использование">
asyncFunc()
    .then(result => { ... })
    .catch(result => { ... })
</v-code>
