<h2>Event Loop</h2>

<u-link-wrapper>
    <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/EventLoop" target="_blank">Статья на MDN</a>
    <a href="https://habr.com/ru/post/461401/" target="_blank">Статья на Habr</a>
    <a href="https://medium.com/@stasonmars/полное-понимание-синхронного-и-асинхронного-javascript-с-async-await-ba5f47f4436" target="_blank">Статья на Medium</a>
</u-link-wrapper>

<ul class="list-point">
    <li>Движок браузера выполняет JavaScript в одном потоке. Он не может поставить обработку события на паузу, переключиться на другое событие, а после возобновить выполнение первого. Все события обрабатываются последовательно и каждое до конца</li>
</ul>

<v-two><template v-slot:first>
<img src="img/js/event-loop.png" width="500px" />
</template><template v-slot:last>
<ol class="list-num">
	<li>Сначала выполняется синхронный код</li>
	<li>Потом выполняется асинхронный код: setTimeout, AJAX-запросы к серверу и т.д.</li>
</ol>
</template></v-two>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>Эволюция методов по работе с асинхронным кодом</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<!------------------------------------------------------------->
<h4>1. Callback-функции</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
setTimeout(function() {
	// асинхронный код
}, 1000);
</v-code>

<v-code lang="js" title="">
element.addEventListener('click', function() {
	// асинхронный код
})
</v-code>

<!------------------------------------------------------------->
<h4>2. Promise</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
fetch('url')
    .then(res => res.json())
    .then(body => console.log(body))
</v-code>

<!------------------------------------------------------------->
<h4>3. Генераторы</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
function getApi() {
	const response = <u-code>yield</u-code> fetch('url');
	const data = <u-code>yield</u-code> response.json();
	return data;
}
</v-code>

<!------------------------------------------------------------->
<h4>4. Асинхронные функции</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
<u-code>async</u-code> function getApi(id) {
    const response = <u-code>await</u-code> fetch('url');
    const data = <u-code>await</u-code> response.json();
    return data;
}
</v-code>
